{%- comment %}
    Author: BSS B2B Login

    DO NOT MODIFY. The contents of BSS B2B Login 
    will overwrite any changes in the next update.

    Updated at: Sat Oct 05 2024
{% endcomment -%}
{% capture removeMetaScript_FL %} <script id="bss-ltap-login-require"> if (typeof metaInforElements === "undefined") { let metaInforElements = document.querySelectorAll("[property^='og:']"); if (metaInforElements.length) { metaInforElements.forEach(element => { element.remove(); }); } setTimeout(function() { let allScript = document.getElementsByTagName('script'); if (allScript.length) { for (let i = 0; i < allScript.length; i++) { let item = allScript[i]; if (item.innerHTML.includes('window.ShopifyAnalytics = window.ShopifyAnalytics')) { item.remove(); } } } let analyticsScript = document.querySelector("script.analytics"); if (analyticsScript) { let analyticsText = analyticsScript.innerHTML; let tracks = analyticsText.match(/window.ShopifyAnalytics.lib.track(\([^;]+\));/g); if (tracks) { let priceReg = /^.*"price":"([0-9.]+)".*$/g; for (let track of tracks) { const match = priceReg.exec(track); if (match && match.length >= 2) { const price = match[1]; const newTrack = track.replace(price, "Hidden by installed app"); analyticsText = analyticsText.replace(track, newTrack); } } analyticsScript.innerHTML = analyticsText; } } }, 2000); setTimeout(()=>{ if (window.ShopifyAnalytics) { window.ShopifyAnalytics.meta = 'Hidden by installed app'; } }, 500); } </script> {% endcapture %} {% unless isForceLoginApplied %} {% assign bss_login_from_date_39884 = 'Thu Jan 01 1970 00:00:00 GMT+0000 (Coordinated Universal Time)' | date: '%s' %} {% assign bss_login_to_date_39884 = 'Thu Dec 31 2099 23:59:59 GMT+0000 (Coordinated Universal Time)' | date: '%s' %} {% if bss_login_from_date_39884 < bss_login_to_day_date and bss_login_to_day_date < bss_login_to_date_39884 %} {% assign product_collection_39884 = "" | split: ',' %} {% if request.path != '/' %} {% for collection in product.collections %} {% assign collection_id = collection.id | split:',' %} {% assign delimiter = "|" | split:',' %} {% assign product_collection_39884 = product_collection_39884 | concat:delimiter %} {% assign product_collection_39884 = product_collection_39884 | concat:collection_id %} {% endfor %} {% endif %} {% if true %} {% assign product_tags = product.tags | join: ',' | downcase  %}{% assign bssFLConvertPath = request.path | split: '/' | join: '/' %}{% unless template contains 'customers/reset_password' or template contains 'customers/register' or template contains 'customers/activate_account' or template contains 'wholesaler' or template contains 'customers/account' or template contains 'customers/addresses' or template contains 'customers/login' or template contains 'customers/order' %} {% unless false %} {% if customer %} {% unless customer %}{% if true %} {% capture content_for_layout %} {% assign isForceLoginApplied = true %} <p>BSS</p> {{bssRedirectUrl_FL_39884}} {{removeMetaScript_FL}} {{disableHeaderFooter_FL}} {% capture login_require_custom_style %} {% render 'login_require_custom_style' %} {% endcapture %} {% unless login_require_custom_style contains "Liquid error" %} {{ login_require_custom_style }} {% endunless %} {% endcapture %} {% else %} {% assign isApplyForceLogin = false %} {% assign content_for_layout = old_content_for_layout %} {% endif %}{% endunless %} {% elsif true %} {% capture content_for_layout %} {% assign isForceLoginApplied = true %} <div class="bss-fl-enable"><p class="bss-fl-message" style="text-align: center;">Private content, please <a id="bss-fl-button-login" style="text-decoration-line: underline;" href="https://bss-train-app.myshopify.com/account/login">login</a> to show or <a id="bss-fl-button-register" style="text-decoration-line: underline;" href="https://bss-train-app.myshopify.com/account/register">create an account</a>.BSSSS</p></div><script type="text/javascript"> const flMessage = document.querySelector(".bss-fl-enable"); if (flMessage) { const FlButtons = flMessage.querySelectorAll('a'); for (const flButton of FlButtons) { if (flButton.hasAttribute('href') && flButton.getAttribute('href').includes('login')) { flButton.id = 'bss-fl-button-login'; flButton.dataset.flBtn = 'login'; } else if (flButton.hasAttribute('href') && flButton.getAttribute('href').includes('register')) { flButton.id = 'bss-fl-button-register'; flButton.dataset.flBtn = 'register'; } } } setAttributeForBtns(); let flTimeInterval = 0; let flInterval = setInterval(()=>{ flTimeInterval += 500; setAttributeForBtns(); if(flTimeInterval >= 4000) { clearInterval(flInterval); } }, 500); function setAttributeForBtns() { let loginBtns = document.querySelectorAll('[data-fl-btn="login"]'); if(loginBtns.length) { loginBtns.forEach(btnLogin => { if ("{{ routes.root_url }}" !== "/") { btnLogin.href = window.location.origin + "{{ routes.root_url }}" + "/account/login"; } if ("{{ routes.root_url }}" !== "/" && "/account".charAt(3) !== "-") { btnLogin.addEventListener('click', function () { setLocalStorage("{{ routes.root_url }}" + "/account"); }); } else { btnLogin.addEventListener('click', function () { setLocalStorage('/account'); }); } }) } let btnRegister = document.querySelectorAll('[data-fl-btn="register"]'); if (btnRegister.length) { btnRegister.forEach(btnRegister => { if ("{{ routes.root_url }}" !== "/") { btnRegister.href = window.location.origin + "{{ routes.root_url }}" + "/account/register"; } if ("{{ routes.root_url }}" !== "/" && "/account".indexOf("-") !== -1) { btnRegister.addEventListener('click', function () { setLocalStorage("{{ routes.root_url }}" + "/account"); }); } else { btnRegister.addEventListener('click', function () { setLocalStorage('/account'); }); } }) } } function setLocalStorage(url) { const BSS = { 'redirect_url': url, }; localStorage.setItem("BSS", JSON.stringify(BSS)); } const url = "https://login-to-access-page-api.bsscommerce.com/behavior"; fetch(url, { method: "POST", headers: { "Content-Type": "application/json", }, body: JSON.stringify( { domain: window.Shopify.shop, events: "fl-access" }) }) </script> {{removeMetaScript_FL}} {{disableHeaderFooter_FL}} {% capture login_require_custom_style %} {% render 'login_require_custom_style' %} {% endcapture %} {% unless login_require_custom_style contains "Liquid error" %} {{ login_require_custom_style }} {% endunless %} {% endcapture %} {% endif %} {% endunless %} {% endunless %} {% endif %} {% endif %} {% endunless %} {% assign bss-ltap-fl = isForceLoginApplied %} {% unless isForceLoginApplied %} {% assign bss_login_from_date_39883 = 'Thu Jan 01 1970 00:00:00 GMT+0000 (Coordinated Universal Time)' | date: '%s' %} {% assign bss_login_to_date_39883 = 'Thu Dec 31 2099 23:59:59 GMT+0000 (Coordinated Universal Time)' | date: '%s' %} {% if bss_login_from_date_39883 < bss_login_to_day_date and bss_login_to_day_date < bss_login_to_date_39883 %} {% assign product_collection_39883 = "" | split: ',' %} {% if request.path != '/' %} {% for collection in product.collections %} {% assign collection_id = collection.id | split:',' %} {% assign delimiter = "|" | split:',' %} {% assign product_collection_39883 = product_collection_39883 | concat:delimiter %} {% assign product_collection_39883 = product_collection_39883 | concat:collection_id %} {% endfor %} {% endif %} {% if true %} {% assign product_tags = product.tags | join: ',' | downcase  %}{% assign bssFLConvertPath = request.path | split: '/' | join: '/' %}{% unless template contains 'customers/reset_password' or template contains 'customers/register' or template contains 'customers/activate_account' or template contains 'wholesaler' or template contains 'customers/account' or template contains 'customers/addresses' or template contains 'customers/login' or template contains 'customers/order' %} {% unless false %} {% if customer %} {% unless customer %}{% if true %} {% capture content_for_layout %} {% assign isForceLoginApplied = true %} {{bssRedirectUrl_FL_39883}} {{removeMetaScript_FL}} {{disableHeaderFooter_FL}} {% capture login_require_custom_style %} {% render 'login_require_custom_style' %} {% endcapture %} {% unless login_require_custom_style contains "Liquid error" %} {{ login_require_custom_style }} {% endunless %} {% endcapture %} {% else %} {% assign isApplyForceLogin = false %} {% assign content_for_layout = old_content_for_layout %} {% endif %}{% endunless %} {% elsif true %} {% capture content_for_layout %} {% assign isForceLoginApplied = true %} <div class="bss-fl-enable"><p class="bss-fl-message" style="text-align: center;">Private content, please <a id="bss-fl-button-login" style="text-decoration-line: underline;" href="https://bss-train-app.myshopify.com/account/login">login</a> to show or <a id="bss-fl-button-register" style="text-decoration-line: underline;" href="https://bss-train-app.myshopify.com/account/register">create an account</a>.</p></div><script type="text/javascript"> const flMessage = document.querySelector(".bss-fl-enable"); if (flMessage) { const FlButtons = flMessage.querySelectorAll('a'); for (const flButton of FlButtons) { if (flButton.hasAttribute('href') && flButton.getAttribute('href').includes('login')) { flButton.id = 'bss-fl-button-login'; flButton.dataset.flBtn = 'login'; } else if (flButton.hasAttribute('href') && flButton.getAttribute('href').includes('register')) { flButton.id = 'bss-fl-button-register'; flButton.dataset.flBtn = 'register'; } } } setAttributeForBtns(); let flTimeInterval = 0; let flInterval = setInterval(()=>{ flTimeInterval += 500; setAttributeForBtns(); if(flTimeInterval >= 4000) { clearInterval(flInterval); } }, 500); function setAttributeForBtns() { let loginBtns = document.querySelectorAll('[data-fl-btn="login"]'); if(loginBtns.length) { loginBtns.forEach(btnLogin => { if ("{{ routes.root_url }}" !== "/") { btnLogin.href = window.location.origin + "{{ routes.root_url }}" + "/account/login"; } if ("{{ routes.root_url }}" !== "/" && "/account".charAt(3) !== "-") { btnLogin.addEventListener('click', function () { setLocalStorage("{{ routes.root_url }}" + "/account"); }); } else { btnLogin.addEventListener('click', function () { setLocalStorage('/account'); }); } }) } let btnRegister = document.querySelectorAll('[data-fl-btn="register"]'); if (btnRegister.length) { btnRegister.forEach(btnRegister => { if ("{{ routes.root_url }}" !== "/") { btnRegister.href = window.location.origin + "{{ routes.root_url }}" + "/account/register"; } if ("{{ routes.root_url }}" !== "/" && "/account".indexOf("-") !== -1) { btnRegister.addEventListener('click', function () { setLocalStorage("{{ routes.root_url }}" + "/account"); }); } else { btnRegister.addEventListener('click', function () { setLocalStorage('/account'); }); } }) } } function setLocalStorage(url) { const BSS = { 'redirect_url': url, }; localStorage.setItem("BSS", JSON.stringify(BSS)); } const url = "https://login-to-access-page-api.bsscommerce.com/behavior"; fetch(url, { method: "POST", headers: { "Content-Type": "application/json", }, body: JSON.stringify( { domain: window.Shopify.shop, events: "fl-access" }) }) </script> {{removeMetaScript_FL}} {{disableHeaderFooter_FL}} {% capture login_require_custom_style %} {% render 'login_require_custom_style' %} {% endcapture %} {% unless login_require_custom_style contains "Liquid error" %} {{ login_require_custom_style }} {% endunless %} {% endcapture %} {% endif %} {% endunless %} {% endunless %} {% endif %} {% endif %} {% endunless %} {% assign bss-ltap-fl = isForceLoginApplied %}